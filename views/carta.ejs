<%- include('parcial/header', { siteName: siteName, currentYear: currentYear }) %>

<section class="container">
  <!-- Encabezado del restaurante -->
  <div class="restaurant-header" style="display:flex;align-items:center;gap:20px;margin-bottom:30px;">
    <img src="<%= restaurante.imagen %>" alt="<%= restaurante.nombre %>" style="width:100px;height:100px;border-radius:14px;object-fit:cover;">
    <div>
      <h1 style="font-size:1.8rem;color:var(--accent);margin-bottom:4px;"><%= restaurante.nombre %></h1>
      <p style="color:var(--muted);font-size:.95rem;">
        <%= restaurante.categoria %> • ⭐ <%= restaurante.rating %> • <%= restaurante.tiempo %>
      </p>
    </div>
  </div>

  <!-- Imagen hero -->
  <div class="restaurant-image" style="border-radius:var(--radius);overflow:hidden;box-shadow:var(--shadow);margin-bottom:40px;">
    <img src="<%= restaurante.imagen %>" alt="<%= restaurante.nombre %>" style="width:100%;height:380px;object-fit:cover;">
  </div>

  <!-- Menú de platos -->
  <h2 class="menu-title">Menú</h2>
  <div class="menu-grid">
    <% (restaurante.menu || restaurante.platos || []).forEach(plato => { %>
      <div class="dish-card">
        <div class="dish-image">
          <img src="<%= plato.imagen %>" alt="<%= plato.nombre %>">
        </div>
        <div class="dish-info">
          <h3><%= plato.nombre %></h3>
          <p><%= plato.descripcion %></p>
        </div>
        <div>
          <p class="dish-price">L <%= plato.precio %></p>

          <!-- ✅ Botón sin comillas conflictivas -->
          <button 
            class="order-btn"
            data-restaurante="<%= restaurante.id %>"
            data-plato="<%= plato.nombre %>"
            data-precio="<%= plato.precio %>">
            Agregar
          </button>

        </div>
      </div>
    <% }) %>
  </div>
</section>

<!-- Script sin inline JS -->
<script>
  document.querySelectorAll('.order-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const restauranteId = btn.dataset.restaurante;
      const plato = btn.dataset.plato;
      const precio = btn.dataset.precio;

      const params = new URLSearchParams({
        restaurante: restauranteId,
        plato,
        precio
      });

      window.location.href = `/checkout?${params.toString()}`;
    });
  });
</script>

<%- include('parcial/footer') %>
